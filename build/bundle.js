var app=function(){"use strict";function noop(){}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function is_empty(e){return 0===Object.keys(e).length}function append(e,t){e.appendChild(t)}function insert(e,t,n){e.insertBefore(t,n||null)}function detach(e){e.parentNode.removeChild(e)}function destroy_each(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function element(e){return document.createElement(e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function listen(e,t,n,a){return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)}function attr(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function children(e){return Array.from(e.childNodes)}function set_data(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function set_input_value(e,t){e.value=null==t?"":t}function set_style(e,t,n,a){e.style.setProperty(t,n,a?"important":"")}function select_option(e,t){for(let n=0;n<e.options.length;n+=1){const a=e.options[n];if(a.__value===t)return void(a.selected=!0)}}function select_value(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}class HtmlTag{constructor(e=null){this.a=e,this.e=this.n=null}m(e,t,n=null){this.e||(this.e=element(t.nodeName),this.t=t,this.h(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)insert(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(detach)}}let current_component;function set_current_component(e){current_component=e}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(e){render_callbacks.push(e)}let flushing=!1;const seen_callbacks=new Set;function flush(){if(!flushing){flushing=!0;do{for(let e=0;e<dirty_components.length;e+=1){const t=dirty_components[e];set_current_component(t),update(t.$$)}for(set_current_component(null),dirty_components.length=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const t=render_callbacks[e];seen_callbacks.has(t)||(seen_callbacks.add(t),t())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,flushing=!1,seen_callbacks.clear()}}function update(e){if(null!==e.fragment){e.update(),run_all(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback)}}const outroing=new Set;function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}const globals="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function mount_component(e,t,n,a){const{fragment:r,on_mount:o,on_destroy:i,after_update:c}=e.$$;r&&r.m(t,n),a||add_render_callback((()=>{const t=o.map(run).filter(is_function);i?i.push(...t):run_all(t),e.$$.on_mount=[]})),c.forEach(add_render_callback)}function destroy_component(e,t){const n=e.$$;null!==n.fragment&&(run_all(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function make_dirty(e,t){-1===e.$$.dirty[0]&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function init(e,t,n,a,r,o,i=[-1]){const c=current_component;set_current_component(e);const l=e.$$={fragment:null,ctx:null,props:o,update:noop,not_equal:r,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:blank_object(),dirty:i,skip_bound:!1};let s=!1;if(l.ctx=n?n(e,t.props||{},((t,n,...a)=>{const o=a.length?a[0]:n;return l.ctx&&r(l.ctx[t],l.ctx[t]=o)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](o),s&&make_dirty(e,t)),n})):[],l.update(),s=!0,run_all(l.before_update),l.fragment=!!a&&a(l.ctx),t.target){if(t.hydrate){const e=children(t.target);l.fragment&&l.fragment.l(e),e.forEach(detach)}else l.fragment&&l.fragment.c();t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor,t.customElement),flush()}set_current_component(c)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var browserSupportsTextareaTextNodes;function canManipulateViaTextNodes(e){if("TEXTAREA"!==e.nodeName)return!1;if(void 0===browserSupportsTextareaTextNodes){var t=document.createElement("textarea");t.value=1,browserSupportsTextareaTextNodes=!!t.firstChild}return browserSupportsTextareaTextNodes}function index(e,t){if(e.focus(),document.selection){var n=document.selection.createRange();return n.text=t,n.collapse(!1),void n.select()}if(!document.execCommand("insertText",!1,t)){var a=e.selectionStart,r=e.selectionEnd;if("function"==typeof e.setRangeText)e.setRangeText(t);else{var o=document.createRange(),i=document.createTextNode(t);if(canManipulateViaTextNodes(e)){var c=e.firstChild;if(c){for(var l=0,s=null,d=null;c&&(null===s||null===d);){var u=c.nodeValue.length;a>=l&&a<=l+u&&o.setStart(s=c,a-l),r>=l&&r<=l+u&&o.setEnd(d=c,r-l),l+=u,c=c.nextSibling}a!==r&&o.deleteContents()}else e.appendChild(i)}if(canManipulateViaTextNodes(e)&&"#text"===o.commonAncestorContainer.nodeName)o.insertNode(i);else{var p=e.value;e.value=p.slice(0,a)+t+p.slice(r)}}e.setSelectionRange(a+t.length,a+t.length);var h=document.createEvent("UIEvent");h.initEvent("input",!0,!1),e.dispatchEvent(h)}}var InfinitySquare='var board = JXG.JSXGraph.initBoard("jxgbox", {\n    boundingbox: [-9, 8, 9, -10],\n    keepaspectreatio: true,\n    axis: false,\n    grid: false,\n    shownavigation: false,\n  });\n\n  // construction\n  board.suspendUpdate();\n  var S = board.create(\n    "slider",\n    [\n      [-5, -6],\n      [5, -6],\n      [0, 0.85, 1],\n    ],\n    {\n      name: "Whirl",\n    }\n  );\n  var hue = board.create(\n    "slider",\n    [\n      [-5, -7],\n      [5, -7],\n      [0, 20.5, 36],\n    ],\n    {\n      name: "Colors",\n    }\n  );\n\n  var points = new Array();\n  points[0] = board.create("point", [5, 5], { name: " " });\n  points[1] = board.create("point", [-5, 5], { name: " " });\n  points[2] = board.create("point", [-5, -5], { name: " " });\n  points[3] = board.create("point", [5, -5], { name: " " });\n\n  function quadrangle(pt, n) {\n    var col;\n    var arr = new Array();\n    for (var i = 0; i < 4; i++) {\n      arr[i] = board.create(\n        "point",\n        [\n          (function (t) {\n            return function () {\n              var x = pt[t].X();\n              var x1 = pt[(t + 1) % 4].X();\n              var s = S.Value();\n              return x + (x1 - x) * s;\n            };\n          })(i),\n          (function (t) {\n            return function () {\n              var y = pt[t].Y();\n              var y1 = pt[(t + 1) % 4].Y();\n              var s = S.Value();\n              return y + (y1 - y) * s;\n            };\n          })(i),\n        ],\n        { size: 1, name: "", withLabel: false, visible: false }\n      );\n    }\n    col = function () {\n      return JXG.hsv2rgb(hue.Value() * n, 0.7, 0.9);\n    };\n    board.create("polygon", pt, { fillColor: col });\n    if (n > 0) quadrangle(arr, --n);\n  }\n  quadrangle(points, 30);\n\n  board.unsuspendUpdate();';let Moonwalk="  var board = JXG.JSXGraph.initBoard('jxgbox', {boundingbox: [-1.5, 1.5, 1.5, -1.5], axis: false, grid: false}),\n        mu = 1.0/81.45, stars = 40, i,\n        apolloPath, moonPath,\n        moon, apollo, earth,\n        ode = function () {\n            var I = [17.066, 0],\n                x0 = [0.994, 0, 0, -2.0015851063790825],\n                N = 10000,\n                data, dataX, dataY, i,\n \n                f = function(t, x) {\n                    var m  = 1.0/81.45,\n                        D1 = Math.sqrt(Math.pow((x[0]+m)*(x[0]+m)+x[2]*x[2],3)),\n                        D2 = Math.sqrt(Math.pow((x[0]-(1-m))*(x[0]-(1-m))+x[2]*x[2],3)),\n                        y = [];\n \n                    y[0] = x[1];\n                    y[1] = x[0]+2*x[3]-(1-m)*(x[0]+m)/D1-m*(x[0]-(1-m))/D2;\n                    y[2] = x[3];\n                    y[3] = x[2]-2*x[1]-(1-m)*x[2]/D1-m*x[2]/D2;\n \n                    return y;\n                };\n \n \n            data = JXG.Math.Numerics.rungeKutta('rk4', x0, I, N, f);\n \n            dataX = [];\n            dataY = [];\n            for(i = 0; i < data.length; i++) {\n                dataX[i] = data[i][0];\n                dataY[i] = data[i][2];\n            }\n \n            return [dataX, dataY];\n        },\n        circle = function (radius, points) {\n            var dataX = [], dataY = [], i;\n \n            for (i = 0; i < points; i++) {\n                dataX[i] = radius*Math.cos(i/(points-1)*2*Math.PI);\n                dataY[i] = -radius*Math.sin(i/(points-1)*2*Math.PI);\n            }\n \n            return [dataX, dataY];\n        };\n \n    // stars\n    for (i = 0; i < stars; i++) {\n        board.create('point', [3*Math.random()-1.5, 3*Math.random()-1.5],{\n            strokeWidth: 0,\n            fillColor: 'white',\n            size: 1,\n            face: '<>',\n            withLabel: false,\n            needsRegularUpdate: false,\n            fixed: true\n        });\n    }\n \n    // earth\n    earth = board.create('point', [-mu, 0], {\n        withLabel: false,\n        strokeWidth: 0,\n        strokeColor: 'none',\n        fillColor: '#4096EE',\n        size: 12\n    });\n \n    earth.setProperty({\n        gradient: 'linear',\n        gradientSecondColor: 'green',\n        needsRegularUpdate: false,\n        fixed: true\n    });\n \n    // our space shuttle\n    apolloPath = board.createElement('curve', ode(), {\n        strokeColor: 'red',\n        strokeOpacity: 0.3,\n        strokeWidth: 3,\n        visible: true,\n        needsRegularUpdate: false\n    });\n \n    apolloPath.hasPoint = function () {\n        return false;\n    };\n \n    apollo = board.create('point', [1, 0], {\n        withLabel: false,\n        strokeColor: 'red',\n        fillColor: 'red',\n        size: 3,\n        face: '<>',\n        fixed: true\n    });\n \n    moon = board.create('point', [1-mu, 0], {\n        withLabel: false,\n        strokeColor: 'gray',\n        fillColor: 'gray',\n        size: 3,\n        fixed: true\n    });\n \n    moon.setProperty({\n        gradient: 'linear',\n        gradientSecondColor: '#ddd'\n    });\n \n    // a text in upper right corner to stop the animation\n    board.create('text', [0.8, 1.3, '<a href=\"javascript:void();\" id=\"stopanimation\">Stop Animation</a>'], {\n        fontSize: 8\n    });\n    $('#stopanimation').click(function () {\n        board.stopAllAnimation();\n    });\n \n    apollo.moveAlong(function (i) {\n        return [apolloPath.dataX[i%apolloPath.dataX.length], apolloPath.dataY[i%apolloPath.dataY.length]];\n    }, 2000);";function saveTextAsFile(e,t){var n=new Blob([e],{type:"text/plain"}),a=document.createElement("a");a.download=t,a.innerHTML="Download File",null!=window.webkitURL?a.href=window.webkitURL.createObjectURL(n):(a.href=window.URL.createObjectURL(n),a.onclick=destroyClickedElement,a.style.display="none",document.body.appendChild(a)),a.click()}function makeJsToHtml(e){return'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <script\n      type="text/javascript"\n      charset="UTF-8"\n      src="https://cdn.jsdelivr.net/npm/jsxgraph@1.1.0/distrib/jsxgraphcore.js"\n    ><\/script>\n    <link\n      rel="stylesheet"\n      type="text/css"\n      href="https://cdn.jsdelivr.net/npm/jsxgraph@1.1.0/distrib/jsxgraph.css"\n    />\n    <title>jsxgraph file</title>\n  </head>\n  <body>\n    <div id="jxgbox" class="jxgbox" style="width: 500px; height: 500px"></div>\n  </body>\n  <script type="text/javascript">'+e+"<\/script>\n</html>"}const{document:document_1}=globals;function get_each_context(e,t,n){const a=e.slice();return a[17]=t[n],a}function get_each_context_1(e,t,n){const a=e.slice();return a[20]=t[n],a[21]=t,a[22]=n,a}function create_each_block_1(e){let t,n,a,r,o,i,c,l,s;function d(){e[8].call(n,e[21],e[22])}function u(){return e[9](e[20])}function p(){return e[10](e[20])}return{c(){t=element("label"),n=element("input"),a=element("button"),a.textContent="insert command",r=space(),o=element("button"),o.textContent="delete",i=space(),c=element("br"),attr(n,"type","text"),attr(n,"size","120")},m(h,m){insert(h,t,m),append(t,n),set_input_value(n,e[20].cmd),append(t,a),append(t,r),append(t,o),append(t,i),insert(h,c,m),l||(s=[listen(n,"input",d),listen(a,"click",u),listen(o,"click",p)],l=!0)},p(t,a){e=t,4&a&&n.value!==e[20].cmd&&set_input_value(n,e[20].cmd)},d(e){e&&detach(t),e&&detach(c),l=!1,run_all(s)}}}function create_each_block(e){let t,n,a,r=e[17].itemName+"";return{c(){t=element("option"),n=text(r),a=space(),t.__value=e[17].cmd,t.value=t.__value},m(e,r){insert(e,t,r),append(t,n),append(t,a)},p:noop,d(e){e&&detach(t)}}}function create_fragment(e){let t,n,a,r,o,i,c,l,s,d,u,p,h,m,_,f,x,b,g,v,k,y,$,C,w,j,T,E,S,N,X,L,M=e[3]===e[0]?"don't need to click":"click to render",A="<script type='text/javascript' id='injected'>"+e[0]+"<\/script>",P=e[2],U=[];for(let t=0;t<P.length;t+=1)U[t]=create_each_block_1(get_each_context_1(e,P,t));let q=e[4],R=[];for(let t=0;t<q.length;t+=1)R[t]=create_each_block(get_each_context(e,q,t));return{c(){t=element("script"),a=element("link"),r=space(),o=element("a"),o.textContent="click to return github repository",i=space(),c=element("h3"),c.textContent="choose command",l=space(),s=element("button"),s.textContent="InfinitySquare",d=space(),u=element("button"),u.textContent="Moonwalk",p=space(),h=element("button"),h.textContent="init",m=element("br"),_=space();for(let e=0;e<U.length;e+=1)U[e].c();f=space(),x=element("input"),b=element("select");for(let e=0;e<R.length;e+=1)R[e].c();g=element("button"),g.textContent="click to add",v=space(),k=element("textarea"),y=space(),$=element("button"),C=text(M),w=space(),j=element("div"),T=space(),S=space(),N=element("button"),N.textContent="download as file",attr(t,"type","text/javascript"),attr(t,"charset","UTF-8"),t.src!==(n="https://cdn.jsdelivr.net/npm/jsxgraph@1.1.0/distrib/jsxgraphcore.js")&&attr(t,"src","https://cdn.jsdelivr.net/npm/jsxgraph@1.1.0/distrib/jsxgraphcore.js"),attr(a,"rel","stylesheet"),attr(a,"type","text/css"),attr(a,"href","https://cdn.jsdelivr.net/npm/jsxgraph@1.1.0/distrib/jsxgraph.css"),set_style(o,"text-decoration","none"),attr(o,"href","https://github.com/wuyudi/svelte-jsxgraph"),attr(x,"type","text"),attr(x,"size","120"),attr(x,"placeholder","type your own command"),void 0===e[1]&&add_render_callback((()=>e[12].call(b))),attr(k,"id","jscode"),attr(k,"name","jscode"),attr(k,"rows","8"),attr(k,"cols","140"),attr(j,"id","jxgbox"),attr(j,"class","jxgbox"),set_style(j,"width","600px"),set_style(j,"height","600px"),E=new HtmlTag(S)},m(n,M){append(document_1.head,t),append(document_1.head,a),insert(n,r,M),insert(n,o,M),insert(n,i,M),insert(n,c,M),insert(n,l,M),insert(n,s,M),insert(n,d,M),insert(n,u,M),insert(n,p,M),insert(n,h,M),insert(n,m,M),insert(n,_,M);for(let e=0;e<U.length;e+=1)U[e].m(n,M);insert(n,f,M),insert(n,x,M),set_input_value(x,e[1]),insert(n,b,M);for(let e=0;e<R.length;e+=1)R[e].m(b,null);select_option(b,e[1]),insert(n,g,M),insert(n,v,M),insert(n,k,M),set_input_value(k,e[0]),insert(n,y,M),insert(n,$,M),append($,C),insert(n,w,M),insert(n,j,M),insert(n,T,M),E.m(A,n,M),insert(n,S,M),insert(n,N,M),X||(L=[listen(s,"click",e[5]),listen(u,"click",e[6]),listen(h,"click",e[7]),listen(x,"input",e[11]),listen(b,"change",e[12]),listen(g,"click",e[13]),listen(k,"input",e[14]),listen($,"click",e[15]),listen(N,"click",e[16])],X=!0)},p(e,[t]){if(4&t){let n;for(P=e[2],n=0;n<P.length;n+=1){const a=get_each_context_1(e,P,n);U[n]?U[n].p(a,t):(U[n]=create_each_block_1(a),U[n].c(),U[n].m(f.parentNode,f))}for(;n<U.length;n+=1)U[n].d(1);U.length=P.length}if(18&t&&x.value!==e[1]&&set_input_value(x,e[1]),16&t){let n;for(q=e[4],n=0;n<q.length;n+=1){const a=get_each_context(e,q,n);R[n]?R[n].p(a,t):(R[n]=create_each_block(a),R[n].c(),R[n].m(b,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=q.length}18&t&&select_option(b,e[1]),1&t&&set_input_value(k,e[0]),9&t&&M!==(M=e[3]===e[0]?"don't need to click":"click to render")&&set_data(C,M),1&t&&A!==(A="<script type='text/javascript' id='injected'>"+e[0]+"<\/script>")&&E.p(A)},i:noop,o:noop,d(e){detach(t),detach(a),e&&detach(r),e&&detach(o),e&&detach(i),e&&detach(c),e&&detach(l),e&&detach(s),e&&detach(d),e&&detach(u),e&&detach(p),e&&detach(h),e&&detach(m),e&&detach(_),destroy_each(U,e),e&&detach(f),e&&detach(x),e&&detach(b),destroy_each(R,e),e&&detach(g),e&&detach(v),e&&detach(k),e&&detach(y),e&&detach($),e&&detach(w),e&&detach(j),e&&detach(T),e&&E.d(),e&&detach(S),e&&detach(N),X=!1,run_all(L)}}}function instance($$self,$$props,$$invalidate){let textareaContent="var board = JXG.JSXGraph.initBoard('jxgbox', {boundingbox: [-20, 10, 20, -10], axis:true});\n",addCommand="",itemList=[{cmd:"let segment = board.create('segment', [p1, p2]);"},{cmd:"let circle = board.create('circle', [p1, p2]);"},{cmd:"let conic = board.create('conic',[A,B,C,D,E]);"},{cmd:"let point = board.create('point', [1.0, 1.0]);"}],templates=[{itemName:"circle",cmd:"let circle = board.create('circle', [p1, p2]);"},{itemName:"conic",cmd:"let conic = board.create('conic', [A,B,C,D,E])"}],currentContent="";const click_handler=()=>{$$invalidate(0,textareaContent=InfinitySquare),eval(InfinitySquare)},click_handler_1=()=>{$$invalidate(0,textareaContent=Moonwalk),eval(Moonwalk)},click_handler_2=()=>{$$invalidate(0,textareaContent="var board = JXG.JSXGraph.initBoard('jxgbox', {boundingbox: [-20, 10, 20, -10], axis:true});"),eval(textareaContent)};function input_input_handler(e,t){e[t].cmd=this.value,$$invalidate(2,itemList)}const click_handler_3=e=>index(document.getElementById("jscode"),e.cmd+"\n"),click_handler_4=e=>{$$invalidate(2,itemList=itemList.filter((t=>t.cmd!==e.cmd)))};function input_input_handler_1(){addCommand=this.value,$$invalidate(1,addCommand),$$invalidate(4,templates)}function select_change_handler(){addCommand=select_value(this),$$invalidate(1,addCommand),$$invalidate(4,templates)}const click_handler_5=()=>{$$invalidate(2,itemList=[...itemList,{cmd:addCommand}]),$$invalidate(1,addCommand="")};function textarea_input_handler(){textareaContent=this.value,$$invalidate(0,textareaContent)}const click_handler_6=()=>{eval(document.getElementById("injected").innerHTML),$$invalidate(3,currentContent=textareaContent)},click_handler_7=()=>saveTextAsFile(makeJsToHtml(textareaContent),"file.html");return[textareaContent,addCommand,itemList,currentContent,templates,click_handler,click_handler_1,click_handler_2,input_input_handler,click_handler_3,click_handler_4,input_input_handler_1,select_change_handler,click_handler_5,textarea_input_handler,click_handler_6,click_handler_7]}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{})}}const app=new App({target:document.body});return app}();
//# sourceMappingURL=bundle.js.map
